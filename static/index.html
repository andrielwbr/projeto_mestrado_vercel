<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>RunAI - Diagn√≥stico</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <style>
        body { background: #f8f9fa; padding: 20px; font-family: monospace; }
        .console-log { 
            background: #000; color: #0f0; padding: 15px; 
            border-radius: 8px; margin-top: 20px; 
            height: 200px; overflow-y: scroll; font-size: 12px;
        }
        .step { margin-bottom: 20px; padding: 15px; background: white; border-radius: 8px; border: 1px solid #ddd; }
        .btn-big { width: 100%; padding: 15px; font-weight: bold; font-size: 1.2rem; }
    </style>
</head>
<body>

    <h3 class="text-center fw-bold">üõ†Ô∏è Modo de Diagn√≥stico</h3>
    
    <div class="step">
        <h5>1. Teste de Bot√£o</h5>
        <p>Clique abaixo. Se aparecer mensagem na caixa preta, seu clique funciona.</p>
        <button id="btnTeste" class="btn btn-warning w-100">TESTAR CLIQUE</button>
    </div>

    <div class="step">
        <h5>2. Criar Conta</h5>
        <input type="email" id="email" class="form-control mb-2" placeholder="Email">
        <input type="password" id="password" class="form-control mb-2" placeholder="Senha (min 6)">
        <button id="btnCriar" class="btn btn-primary btn-big">CRIAR CONTA</button>
    </div>

    <div class="console-log" id="telaConsole">
        > Aguardando sistema iniciar...<br>
    </div>

<script>
    // --- FUN√á√ÉO PARA ESCREVER NA TELA ---
    function log(msg) {
        const tela = document.getElementById('telaConsole');
        const hora = new Date().toLocaleTimeString();
        tela.innerHTML += `[${hora}] ${msg}<br>`;
        tela.scrollTop = tela.scrollHeight; // Rola para baixo
        console.log(msg);
    }

    // --- CONFIGURA√á√ÉO ---
    const SUPABASE_URL = 'https://iqdllutxyqfgqfafxrrv.supabase.co';
    const SUPABASE_KEY = 'sb_publishable_PJ3S6xPzQq_YcpQPAJD0Lw_zOjJZAph';

    let supabase;

    // --- AO CARREGAR A P√ÅGINA ---
    window.onload = function() {
        log("1. P√°gina carregada.");

        // Verifica se a biblioteca baixou
        if (typeof window.supabase === 'undefined') {
            log("‚ùå ERRO CR√çTICO: Biblioteca Supabase N√ÉO carregou.");
            log("Verifique sua internet ou bloqueadores de an√∫ncio.");
            return;
        }

        log("2. Biblioteca detectada. Iniciando Supabase...");
        
        try {
            supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
            log("‚úÖ Supabase iniciado com sucesso!");
        } catch (e) {
            log("‚ùå Erro ao iniciar Supabase: " + e.message);
        }

        // Ativa bot√µes manualmente
        document.getElementById('btnTeste').addEventListener('click', function() {
            log("‚úÖ O BOT√ÉO EST√Å FUNCIONANDO!");
        });

        document.getElementById('btnCriar').addEventListener('click', criarConta);
    };

    // --- FUN√á√ÉO DE CRIAR CONTA ---
    async function criarConta() {
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        log(`Tentando criar conta para: ${email}`);

        if (!email || !password) {
            log("‚ö†Ô∏è Erro: Email ou senha vazios.");
            return;
        }

        try {
            const { data, error } = await supabase.auth.signUp({
                email: email,
                password: password
            });

            if (error) {
                log("‚ùå Erro do Supabase: " + error.message);
            } else {
                log("üèÜ SUCESSO! Conta criada. ID: " + (data.user?.id || "Pendente"));
                log("Verifique seu email (se tiver confirma√ß√£o) ou tente logar.");
            }

        } catch (e) {
            log("‚ùå Erro de conex√£o/c√≥digo: " + e.message);
        }
    }
</script>

</body>
</html>
